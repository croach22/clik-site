---
import DocsLayout from '../../layouts/DocsLayout.astro';
import { getAllDocs, GROUP_ORDER } from '../../lib/notion';

const allDocs = await getAllDocs();
const featured = allDocs.filter(d => d.featured);

const groupMeta: Record<string, { description: string }> = {
  'Getting Started': { description: 'Create your first project, upload footage, and get up to speed fast.' },
  'Editing': { description: 'Use AI to edit by conversation, add clips, and manage your timeline.' },
  'Captioning and Exports': { description: 'Generate captions, style them, and export your finished video.' },
};
---

<DocsLayout title="Clik Docs" description="Learn how to use Clik â€” upload footage, edit with AI, export your finished video.">

  <div class="pt-6 pb-14 border-b border-white/6">
    <h1 class="text-4xl font-bold text-white mb-4 tracking-tight leading-tight">Clik Documentation</h1>
    <p class="text-zinc-400 text-base leading-relaxed max-w-xl mb-8">Everything you need to upload footage, edit with AI, and export a finished video.</p>
    <div class="flex flex-wrap items-center gap-3">
      <a href={`/docs/${(featured[0] || allDocs[0])?.slug}`} class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg bg-white text-[#0a080d] font-semibold text-sm hover:bg-zinc-100 transition-colors">
        Get Started
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M3 7h8M8 4l3 3-3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
      <a href="#categories" class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg border border-white/12 text-zinc-300 font-medium text-sm hover:bg-white/5 hover:border-white/20 transition-colors">Browse all topics</a>
    </div>
  </div>

  <div id="categories" class="pt-12">
    <h2 class="mb-6 text-xs font-semibold uppercase tracking-widest text-zinc-500">Explore by category</h2>
    <div class="grid gap-3 sm:grid-cols-3">
      {GROUP_ORDER.map(group => {
        const meta = groupMeta[group] ?? { description: '' };
        const docs = allDocs.filter(d => d.group === group);
        const firstDoc = docs[0];
        if (!firstDoc) return null;
        return (
          <a href={`/docs/${firstDoc.slug}`} class="group rounded-xl border border-white/8 bg-white/3 p-5 hover:bg-white/6 hover:border-white/15 transition-all">
            <div class="mb-4 h-9 w-9 rounded-lg bg-white/5 border border-white/8 flex items-center justify-center text-[#DC1DD9]">
              {group === 'Getting Started' && <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 1.5L11 6.5H16.5L12 9.5L13.5 15L9 12L4.5 15L6 9.5L1.5 6.5H7L9 1.5Z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/></svg>}
              {group === 'Editing' && <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M2.5 15L7 10M7 10L12 5L13.5 6.5M7 10L8 11.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 5L13 3.5L15 5.5L14 7M12 5L13.5 6.5M13.5 6.5L14 7" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>}
              {group === 'Captioning and Exports' && <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><rect x="1.5" y="4" width="15" height="10" rx="1.5" stroke="currentColor" stroke-width="1.4"/><path d="M4.5 8h5M4.5 11h8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>}
            </div>
            <p class="font-semibold text-white text-sm mb-1.5">{group}</p>
            <p class="text-xs text-zinc-500 leading-relaxed">{meta.description}</p>
          </a>
        );
      })}
    </div>
  </div>

  {featured.length > 0 && (
    <div class="mt-14">
      <h2 class="mb-5 text-xs font-semibold uppercase tracking-widest text-zinc-500">Quick start</h2>
      <div class="divide-y divide-white/5 rounded-xl border border-white/6 overflow-hidden">
        {featured.map(doc => (
          <a href={`/docs/${doc.slug}`} class="group flex items-center justify-between px-4 py-3.5 bg-white/2 hover:bg-white/5 transition-colors">
            <div>
              <p class="text-sm font-medium text-zinc-300 group-hover:text-white transition-colors">{doc.title}</p>
              <p class="text-xs text-zinc-600 mt-0.5">{doc.group}</p>
            </div>
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" class="text-zinc-600 group-hover:text-zinc-400 shrink-0"><path d="M3 7h8M8 4l3 3-3 3" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
        ))}
      </div>
    </div>
  )}

</DocsLayout>
